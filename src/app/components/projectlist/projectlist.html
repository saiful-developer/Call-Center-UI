<div class="content-wrapper">

  <app-page-header title="Incoming" iconClass="mdi-format-list-checkbox"></app-page-header>


  <div class="container-fluid">
    <div class="search-bar-wrapper">
      <form class="search-project d-lg-flex flex-wrap gap-2 align-items-center" [formGroup]="searchForm"
        (ngSubmit)="getSearchedResult()">
        <!-- Always visible inputs -->
        <div>
          <label for="caller-naem">Caller Name</label>
          <input type="text" class="form-control modern-input" placeholder="Caller Name" formControlName="search_name"
            id="caller-naem" />
        </div>
        <div>
          <label for="form-date">From Date</label>
          <input type="date" class="form-control modern-input" placeholder="ID" formControlName="search_id"
            id="form-date" />
        </div>
        <div>
          <label for="form-date">To Date</label>
          <input type="date" class="form-control modern-input" placeholder="Role" formControlName="search_role"
            id="to-date" />
        </div>



        <!-- Toggle Button for dropdown inputs (only on small screens) -->
        <button id="filterToggleBtn" class="btn  d-lg-none small-toggle" type="button" data-bs-toggle="collapse"
          data-bs-target="#moreSearchFields" aria-expanded="false" aria-controls="moreSearchFields">
          More <span id="toggleIcon" class="bi bi-chevron-down"></span>
        </button>

        <!-- Collapsible Search Inputs -->
        <div class="collapse d-lg-flex gap-2 align-items-center" id="moreSearchFields">
          <div>
            <label for="">Campain</label>
            <select class="form-select" aria-label="Default select example">
              <option selected>Select Campaign</option>
              <option value="1">One</option>
              <option value="2">Two</option>
              <option value="3">Three</option>
            </select>
            <!-- <input type="email" class="form-control modern-input" placeholder="Email" formControlName="search_email" /> -->
          </div>

          <div>
            <label for="">Status</label>
            <select class="form-select" aria-label="Default select example">
              <option selected>Select Status</option>
              <option value="1">One</option>
              <option value="2">Two</option>
              <option value="3">Three</option>
            </select>
            <!-- <input type="email" class="form-control modern-input" placeholder="Email" formControlName="search_email" /> -->
          </div>


          <!-- <input type="text" class="form-control modern-input" placeholder="Title"
            formControlName="search_project_title" />
          <input type="text" class="form-control modern-input" placeholder="Type"
            formControlName="search_prject_type" />
          <input type="text" class="form-control modern-input" placeholder="Assigned"
            formControlName="search_assigned_by" /> -->

        </div>

        <!-- Search Button -->
        <button type="submit" class="btn modern-btn">
          <i class="bi bi-search me-1"></i> Search
        </button>
      </form>
    </div>
  </div>






  <div class="d-none d-md-block">
    <table class="table  table-hover  shadow-sm rounded">
      <thead class="">
        <tr>
          <th>#</th>
          <th>UniqueID</th>
          <th>Calldate</th>
          <th>Caller</th>
          <th>Hunting</th>
          <th>Campaign</th>
          <th>Queue Time</th>
          <th>Ring Time</th>
          <th>Talk Time</th>
          <th>Transfer To</th>
          <th>Finished By</th>
          <th>Disposition</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let report of incomingReportsData; let i = index">
          <td>{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td>{{ report.uniqueid }}</td>
          <td>{{ report.calldate ?? '-' }}</td>
          <td>{{ report.src }}</td>
          <td>{{ report.dst ?? '-' }}</td>
          <td>{{ report.campaign ?? '-' }}</td>
          <td>{{ report.caller_queue_time ?? '-' }}</td>
          <td>{{ report.connect_ring_time ?? '-' }}</td>
          <td>{{ report.caller_agent_talk_time ?? '-' }}</td>
          <td>{{ report.transfer_to ? 'Yes' : 'No' }}</td>
          <td>{{ report.finished_by ?? '-' }}</td>
          <td>{{ report.disposition ?? '-' }}</td>
        </tr>


      </tbody>

    </table>
  </div>

  <!-- Mobile Card View -->
  <!-- <div class="d-md-none">
    <div *ngFor="let project of pagedListFromChild; let i = index" class="card shadow-sm mb-3">
      <div class="card-body">
        <h5 class="card-title">{{ project.project_title }}</h5>
        <p class="mb-1"><strong>#{{ (currentPage - 1) * pageSize + i + 1 }}</strong></p>
        <p class="mb-1"><strong>User:</strong> {{ project.user_name }} ({{ project.user_id }})</p>
        <p class="mb-1"><strong>Role:</strong> {{ project.user_role }}</p>
        <p class="mb-1"><strong>Email:</strong> {{ project.email }}</p>
        <p class="mb-1"><strong>Type:</strong> {{ project.project_type }}</p>
        <p class="mb-1"><strong>Assigned By:</strong> {{ project.assigned_by }}</p>
        <p class="mb-1"><strong>Start:</strong> {{ project.start_time }}</p>
        <p class="mb-1"><strong>End:</strong>
          <span *ngIf="project.end_time; else ongoingMobile">{{ project.end_time }}</span>
          <ng-template #ongoingMobile><span class="badge bg-success">Working</span></ng-template>
        </p>
        <p class="mb-1"><strong>Description:</strong> {{ project.project_description }}</p>
        <p class="mb-0"><strong>Created:</strong> {{ project.created_at | date:'short' }}</p>
      </div>
    </div>
  </div> -->


  <app-paginator [projectList]="incomingReportsData" (pageChanged)="handlePageChange($event)"></app-paginator>


</div>